(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[196],{4047:function(e,s,l){Promise.resolve().then(l.bind(l,722))},722:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return x}});var a=l(7437),t=l(2265),r=l(5990),o=l(9695);let i=async e=>{let s=new FormData;s.append("file",e);try{let e=await fetch("http://127.0.0.1:5001/api/v0/add",{method:"POST",body:s});if(!e.ok)throw Error("Failed to upload to IPFS: Network response was not ok");let l=await e.json();return console.log("File uploaded to IPFS:",l),l.Hash}catch(e){throw console.error("Error uploading to IPFS:",e),e}};var n=l(8775),d=l(6648),c=l(1942),x=()=>{let[e,s]=(0,t.useState)({firstName:"",lastName:"",position:"",addressInfo:""}),[l,x]=(0,t.useState)(null),[u,m]=(0,t.useState)(null),[h,g]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[j,N]=(0,t.useState)(!1),[b,v]=(0,t.useState)(""),[y,w]=(0,t.useState)(""),B=(0,t.useRef)(null),C=(0,t.useRef)(null),k=l=>{s({...e,[l.target.name]:l.target.value})},P=(e,s,l)=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(t){s(t);let e=new FileReader;e.onloadend=()=>{l(e.result)},e.readAsDataURL(t)}else s(null),l(null)},I=async()=>{N(!0),w(""),v("");try{if(!e.firstName||!e.lastName||!e.position||!e.addressInfo)throw Error("All fields are required.");if(!l||!u)throw Error("Both profile and logo images are required.");let a=new r.Q(window.ethereum);if(!await a.getSigner())throw Error("Signer not available. Connect your wallet first.");let t=await i(l),n=await i(u),d=await (0,o.Z)(),c=await d.addCandidate(e.firstName,e.lastName,e.position,e.addressInfo,t,n);await c.wait(),v("Candidate added successfully!"),s({firstName:"",lastName:"",position:"",addressInfo:""}),x(null),m(null),g(null),f(null)}catch(e){console.error("Error adding candidate:",e),w(e.message||"Failed to add candidate. Please try again.")}finally{N(!1)}};return(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"min-h-screen py-8 px-6",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-logoBlue/10 rounded-full px-6 py-3 mb-6",children:[(0,a.jsx)(c.Bj$,{className:"text-logoBlue"}),(0,a.jsx)("span",{className:"text-logoBlue font-semibold",children:"Add New Candidate"})]}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-logoBlue mb-4",children:"Register Candidate"}),(0,a.jsx)("p",{className:"text-xl text-gray-600",children:"Add a new candidate to the election with their details and images"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-logoBlue to-bgBlue px-8 py-8 text-white relative",children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 w-8 h-8 border-2 border-white/20 rounded-lg rotate-45"}),(0,a.jsx)("div",{className:"absolute top-4 right-4 w-6 h-6 bg-popBlue/30 rounded-full animate-pulse"}),(0,a.jsxs)("div",{className:"text-center relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-popBlue rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(c.Bj$,{className:"text-3xl text-bgBlue"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Candidate Registration Form"}),(0,a.jsx)("p",{className:"text-blue-100 mt-2",children:"Fill in all required information"})]})]}),(0,a.jsxs)("div",{className:"p-8 space-y-8",children:[b&&(0,a.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-xl",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(c.FJM,{className:"h-5 w-5 text-green-400"})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-green-700 font-medium",children:b})})]})}),y&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-r-xl",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:y})})]})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(c.Xws,{className:"text-logoBlue"}),(0,a.jsx)("span",{children:"First Name"})]}),(0,a.jsx)("input",{type:"text",name:"firstName",value:e.firstName,onChange:k,placeholder:"Enter first name",className:"w-full px-6 py-4 bg-gray-50 border-0 rounded-2xl focus:bg-white focus:ring-2 focus:ring-logoBlue focus:outline-none transition-all duration-300 text-lg"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(c.Xws,{className:"text-logoBlue"}),(0,a.jsx)("span",{children:"Last Name"})]}),(0,a.jsx)("input",{type:"text",name:"lastName",value:e.lastName,onChange:k,placeholder:"Enter last name",className:"w-full px-6 py-4 bg-gray-50 border-0 rounded-2xl focus:bg-white focus:ring-2 focus:ring-logoBlue focus:outline-none transition-all duration-300 text-lg"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(c.Bj$,{className:"text-logoBlue"}),(0,a.jsx)("span",{children:"Position"})]}),(0,a.jsx)("input",{type:"text",name:"position",value:e.position,onChange:k,placeholder:"Enter position (e.g., President, Mayor, etc.)",className:"w-full px-6 py-4 bg-gray-50 border-0 rounded-2xl focus:bg-white focus:ring-2 focus:ring-logoBlue focus:outline-none transition-all duration-300 text-lg"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(c.Nh4,{className:"text-logoBlue"}),(0,a.jsx)("span",{children:"Address"})]}),(0,a.jsx)("input",{type:"text",name:"addressInfo",value:e.addressInfo,onChange:k,placeholder:"Enter full address",className:"w-full px-6 py-4 bg-gray-50 border-0 rounded-2xl focus:bg-white focus:ring-2 focus:ring-logoBlue focus:outline-none transition-all duration-300 text-lg"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(c.Dmm,{className:"text-logoBlue"}),(0,a.jsx)("span",{children:"Profile Image"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 text-center hover:border-logoBlue transition-colors duration-300 relative",children:[h?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 mx-auto rounded-full overflow-hidden border-4 border-logoBlue/20",children:(0,a.jsx)(d.default,{height:96,width:96,src:h,alt:"Profile Preview",className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),x(null),g(null)},className:"text-red-600 hover:text-red-700 text-sm font-medium px-3 py-1 rounded-lg hover:bg-red-50 transition-colors",children:"Remove Image"}),(0,a.jsx)("button",{type:"button",onClick:e=>{var s;e.stopPropagation(),null===(s=B.current)||void 0===s||s.click()},className:"text-logoBlue hover:text-logoBlue/80 text-sm font-medium px-3 py-1 rounded-lg hover:bg-logoBlue/10 transition-colors",children:"Change Image"})]})]}):(0,a.jsxs)("div",{className:"space-y-4 cursor-pointer",onClick:()=>{var e;return null===(e=B.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-logoBlue/10 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(c.Dmm,{className:"text-2xl text-logoBlue"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload profile image"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB"})]})]}),(0,a.jsx)("input",{ref:B,type:"file",accept:"image/*",onChange:e=>P(e,x,g),className:"hidden"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(c.H3h,{className:"text-logoBlue"}),(0,a.jsx)("span",{children:"Logo Image"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 text-center hover:border-logoBlue transition-colors duration-300 relative",children:[p?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 mx-auto rounded-2xl overflow-hidden border-4 border-logoBlue/20",children:(0,a.jsx)(d.default,{height:96,width:96,src:p,alt:"Logo Preview",className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),m(null),f(null)},className:"text-red-600 hover:text-red-700 text-sm font-medium px-3 py-1 rounded-lg hover:bg-red-50 transition-colors",children:"Remove Image"}),(0,a.jsx)("button",{type:"button",onClick:e=>{var s;e.stopPropagation(),null===(s=C.current)||void 0===s||s.click()},className:"text-logoBlue hover:text-logoBlue/80 text-sm font-medium px-3 py-1 rounded-lg hover:bg-logoBlue/10 transition-colors",children:"Change Image"})]})]}):(0,a.jsxs)("div",{className:"space-y-4 cursor-pointer",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-logoBlue/10 rounded-2xl flex items-center justify-center mx-auto",children:(0,a.jsx)(c.H3h,{className:"text-2xl text-logoBlue"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"Upload logo image"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB"})]})]}),(0,a.jsx)("input",{ref:C,type:"file",accept:"image/*",onChange:e=>P(e,m,f),className:"hidden"})]})]})]}),(0,a.jsx)("button",{onClick:I,disabled:j,className:"w-full py-4 bg-gradient-to-r from-logoBlue to-bgBlue text-white font-bold text-lg rounded-2xl hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 ".concat(j?"opacity-75 cursor-not-allowed":"hover:scale-[1.02]"),children:j?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,a.jsx)(c.fCD,{className:"animate-spin"}),(0,a.jsx)("span",{children:"Adding Candidate..."})]}):(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(c.Bj$,{}),(0,a.jsx)("span",{children:"Add Candidate"})]})})]})]}),(0,a.jsx)("div",{className:"mt-8 bg-logoBlue/5 rounded-2xl p-6 border border-logoBlue/10",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-logoBlue rounded-xl flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(c.Bj$,{className:"text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-logoBlue mb-2",children:"Adding Candidates"}),(0,a.jsxs)("div",{className:"text-gray-600 text-sm space-y-1",children:[(0,a.jsx)("p",{children:"• Make sure to fill in all required fields"}),(0,a.jsx)("p",{children:"• Profile image should clearly show the candidate's face"}),(0,a.jsx)("p",{children:"• Logo image will be displayed as the candidate's symbol"}),(0,a.jsx)("p",{children:"• Images will be stored securely on IPFS"}),(0,a.jsx)("p",{children:"• Transaction will be recorded on blockchain for transparency"})]})]})]})})]})})})}}},function(e){e.O(0,[699,853,648,634,171,971,23,744],function(){return e(e.s=4047)}),_N_E=e.O()}]);