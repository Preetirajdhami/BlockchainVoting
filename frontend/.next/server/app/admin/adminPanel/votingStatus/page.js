(()=>{var e={};e.id=705,e.ids=[705],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},6005:e=>{"use strict";e.exports=require("node:crypto")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6018:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(7565),s(7346),s(5866);var l=s(3191),a=s(8716),r=s(7922),o=s.n(r),i=s(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(t,n);let d=["",{children:["admin",{children:["adminPanel",{children:["votingStatus",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7565)),"/Users/manojshrestha/blockchain-voting/frontend/src/app/admin/adminPanel/votingStatus/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,7346)),"/Users/manojshrestha/blockchain-voting/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/manojshrestha/blockchain-voting/frontend/src/app/admin/adminPanel/votingStatus/page.tsx"],x="/admin/adminPanel/votingStatus/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new l.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/adminPanel/votingStatus/page",pathname:"/admin/adminPanel/votingStatus",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1882:(e,t,s)=>{Promise.resolve().then(s.bind(s,4055))},4055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var l=s(326),a=s(7577),r=s(35),o=s(3546),i=s(3360),n=s(7390),d=s(8236),c=s(6226),x=s(4046);n.kL.register(n.qi,n.u,n.De,d.Z);let m=()=>{let[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)(!1),[d,m]=(0,a.useState)([]),[h,u]=(0,a.useState)([]),[g,b]=(0,a.useState)(!1),[p,v]=(0,a.useState)(!1),[f,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!0),y=async()=>{try{N(!0);let e=await fetch("https://blockchainvoting-z1xf.onrender.com/api/admin/voting-status");if(!e.ok)throw Error("Failed to fetch voting status");let s=await e.json();t(s.isVotingActive)}catch(e){console.error("Error fetching voting status:",e)}finally{N(!1)}},C=async()=>{try{j(!0);let e=await fetch("https://blockchainvoting-z1xf.onrender.com/api/admin/voting-status/toggle",{method:"POST"});if(!e.ok)throw Error("Failed to toggle voting status");let s=await e.json();t(s.isVotingActive),s.isVotingActive||n(!0)}catch(e){console.error("Error toggling voting status:",e)}finally{j(!1)}},S=async()=>{try{let e=await (0,o.Z)(),t=await e.getWinners();if(!t||0===t.length){console.warn("No winners found."),m([]);return}let s=t.map(e=>({id:e?.id?.toString()||"N/A",firstName:e?.firstName||"Unknown",lastName:e?.lastName||"Unknown",position:e?.position||"Unknown",voteCount:e?.voteCount?.toString()||"0",profileImageHash:e?.profileImageHash||""}));m(s)}catch(e){console.error("Error fetching winners:",e)}},B=async()=>{try{let e=await (0,o.Z)(),t=await e.getAllCandidates();if(!t||0===t.length){console.warn("No candidates found."),u([]);return}let s=t.map(e=>({name:`${e?.firstName||"Unknown"} ${e?.lastName||"Unknown"}`,votes:parseInt(e?.voteCount?.toString()||"0")}));u(s)}catch(e){console.error("Error fetching votes data:",e)}};(0,a.useEffect)(()=>{y()},[]);let k=async()=>{await S(),await B()};if(w)return l.jsx(r.Z,{children:l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"w-16 h-16 border-4 border-logoBlue border-t-transparent rounded-full animate-spin mx-auto"}),l.jsx("p",{className:"text-gray-600 text-lg",children:"Loading voting status..."})]})})});let P=Math.max(...h.map(e=>e.votes),0),V=Math.min(...h.map(e=>e.votes),0),E={labels:h.map(e=>e.name),datasets:[{data:h.map(e=>e.votes),backgroundColor:h.map(e=>e.votes===P&&P>0?"#004b84":e.votes===V?"#207C9F":"#012b64"),borderWidth:0,hoverBorderWidth:3,hoverBorderColor:"#fff"}]};return l.jsx(r.Z,{children:(0,l.jsxs)("div",{className:"p-6 md:p-8",children:[(0,l.jsxs)("div",{className:"mb-12",children:[(0,l.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-logoBlue/10 rounded-full px-4 py-2 mb-4",children:[l.jsx(x.SRq,{className:"text-logoBlue"}),l.jsx("span",{className:"text-logoBlue font-semibold",children:"Election Control"})]}),l.jsx("h1",{className:"text-4xl font-bold text-logoBlue mb-4",children:"Voting Status Management"}),l.jsx("p",{className:"text-xl text-gray-600",children:"Control the voting process and monitor election results in real-time"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-200 overflow-hidden mb-8",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-logoBlue to-bgBlue px-8 py-8 text-white relative",children:[l.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 border-2 border-white/20 rounded-lg rotate-45"}),l.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 bg-popBlue/30 rounded-full animate-pulse"}),(0,l.jsxs)("div",{className:"text-center relative",children:[l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl ${e?"bg-green-500":"bg-gray-500"}`,children:e?l.jsx(x.gmG,{className:"text-3xl text-white"}):l.jsx(x.JuG,{className:"text-3xl text-white"})}),l.jsx("h2",{className:"text-3xl font-bold mb-3",children:e?"Voting is Active":s?"Voting Ended":"Voting Not Started"}),l.jsx("p",{className:"text-blue-100 text-lg",children:e?"Voters can currently cast their ballots":s?"View the final election results below":"Ready to start the voting process"})]})]}),(0,l.jsxs)("div",{className:"p-8 text-center",children:[!s&&l.jsx("button",{onClick:()=>{e?b(!0):v(!0)},disabled:f,className:`px-12 py-4 rounded-2xl font-bold text-lg transition-all duration-300 transform hover:scale-105 ${f?"bg-gray-400 text-white cursor-not-allowed":e?"bg-red-500 hover:bg-red-600 text-white hover:shadow-xl":"bg-gradient-to-r from-logoBlue to-bgBlue text-white hover:shadow-xl"}`,children:f?(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[l.jsx(x.fCD,{className:"animate-spin"}),l.jsx("span",{children:"Processing..."})]}):(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[e?l.jsx(x.JuG,{}):l.jsx(x.gmG,{}),l.jsx("span",{children:e?"Stop Voting":"Start Voting"})]})}),!e&&s&&l.jsx("button",{onClick:k,className:"px-12 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl font-bold text-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[l.jsx(x.yQE,{}),l.jsx("span",{children:"View Results"})]})})]})]}),!e&&s&&d.length>0&&h.length>0&&(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-200 overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 px-8 py-8 text-center relative overflow-hidden",children:[l.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full"}),l.jsx("div",{className:"absolute -bottom-4 -left-4 w-32 h-32 bg-white/10 rounded-full"}),(0,l.jsxs)("div",{className:"relative",children:[l.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl",children:l.jsx(x.CvY,{className:"text-4xl text-yellow-500"})}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"\uD83C\uDF89 Election Winner! \uD83C\uDF89"}),l.jsx("p",{className:"text-yellow-100 text-lg",children:"Congratulations to our newly elected representative"})]})]}),l.jsx("div",{className:"p-8",children:d.map((e,t)=>l.jsx("div",{className:"text-center",children:(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"relative inline-block mb-6",children:[l.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-yellow-400 overflow-hidden bg-gray-100 shadow-xl",children:l.jsx(c.default,{src:e.profileImageHash?`https://ipfs.io/ipfs/${e.profileImageHash}`:"/default-avatar.png",alt:"Winner Avatar",width:128,height:128,className:"w-full h-full object-cover"})}),l.jsx("div",{className:"absolute -top-2 -right-2 w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:l.jsx(x.CvY,{className:"text-yellow-900 text-lg"})})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h3",{className:"text-3xl font-bold text-logoBlue",children:[e.firstName," ",e.lastName]}),(0,l.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-logoBlue/10 text-logoBlue px-6 py-3 rounded-full font-semibold text-lg",children:[l.jsx(x.I$,{}),l.jsx("span",{children:e.position})]}),(0,l.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-800 px-6 py-3 rounded-full font-bold text-xl",children:[l.jsx(x.SRq,{}),(0,l.jsxs)("span",{children:[e.voteCount," Votes"]})]})]})]})},t))})]}),(0,l.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-200 p-8",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-logoBlue/10 rounded-full px-4 py-2 mb-4",children:[l.jsx(x.yQE,{className:"text-logoBlue"}),l.jsx("span",{className:"text-logoBlue font-semibold",children:"Vote Distribution"})]}),l.jsx("h3",{className:"text-2xl font-bold text-logoBlue mb-4",children:"Election Results"}),(0,l.jsxs)("p",{className:"text-gray-600",children:["Total votes: ",l.jsx("span",{className:"font-bold text-logoBlue",children:h.reduce((e,t)=>e+t.votes,0)})]})]}),l.jsx("div",{className:"relative h-80",children:l.jsx(i.by,{data:E,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:15,padding:15,font:{size:12},usePointStyle:!0}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#004b84",borderWidth:1,callbacks:{label:function(e){let t=e.label||"",s=e.raw||0,l=e.dataset.data.reduce((e,t)=>e+t,0),a=l>0?(s/l*100).toFixed(2):"0";return`${t}: ${s} votes (${a}%)`}}},datalabels:{color:"white",font:{weight:"bold",size:14},formatter:(e,t)=>{let s=t.dataset.data.reduce((e,t)=>e+t,0),l=s>0?(e/s*100).toFixed(1):"0";return`${l}%`}}}}})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-200 p-8",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-logoBlue/10 rounded-full px-4 py-2 mb-4",children:[l.jsx(x.I$,{className:"text-logoBlue"}),l.jsx("span",{className:"text-logoBlue font-semibold",children:"Detailed Results"})]}),l.jsx("h3",{className:"text-2xl font-bold text-logoBlue",children:"Candidate Rankings"})]}),l.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:h.sort((e,t)=>t.votes-e.votes).map((e,t)=>{let s=h.reduce((e,t)=>e+t.votes,0),a=s>0?(e.votes/s*100).toFixed(1):"0",r=e.votes===P&&P>0;return(0,l.jsxs)("div",{className:`p-4 rounded-2xl border-2 transition-all duration-300 ${r?"border-yellow-400 bg-yellow-50":"border-gray-200 bg-gray-50 hover:bg-white"}`,children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[r&&l.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:l.jsx(x.CvY,{className:"text-yellow-900 text-sm"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:`font-semibold ${r?"text-yellow-800":"text-gray-900"}`,children:e.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["#",t+1," â€¢ ",a,"% of votes"]})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[l.jsx("p",{className:`text-xl font-bold ${r?"text-yellow-800":"text-logoBlue"}`,children:e.votes}),l.jsx("p",{className:"text-sm text-gray-600",children:"votes"})]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full transition-all duration-1000 ${r?"bg-yellow-500":"bg-logoBlue"}`,style:{width:`${a}%`}})})]},t)})})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-200 p-8",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-logoBlue mb-4",children:"Election Statistics"}),l.jsx("p",{className:"text-gray-600",children:"Complete overview of the election results and participation metrics"})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-4 gap-6",children:[(0,l.jsxs)("div",{className:"text-center p-6 bg-logoBlue/5 rounded-2xl border border-logoBlue/10",children:[l.jsx("div",{className:"w-12 h-12 bg-logoBlue rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(x.I$,{className:"text-white"})}),l.jsx("div",{className:"text-2xl font-bold text-logoBlue mb-1",children:h.length}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Candidates"})]}),(0,l.jsxs)("div",{className:"text-center p-6 bg-green-50 rounded-2xl border border-green-200",children:[l.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(x.SRq,{className:"text-white"})}),l.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:h.reduce((e,t)=>e+t.votes,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Votes Cast"})]}),(0,l.jsxs)("div",{className:"text-center p-6 bg-yellow-50 rounded-2xl border border-yellow-200",children:[l.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(x.CvY,{className:"text-yellow-900"})}),l.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-1",children:P}),l.jsx("div",{className:"text-sm text-gray-600",children:"Winning Vote Count"})]}),(0,l.jsxs)("div",{className:"text-center p-6 bg-purple-50 rounded-2xl border border-purple-200",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(x.yQE,{className:"text-white"})}),(0,l.jsxs)("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[h.length>0&&h.reduce((e,t)=>e+t.votes,0)>0?(P/h.reduce((e,t)=>e+t.votes,0)*100).toFixed(1):"0","%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Winner's Share"})]})]})]})]}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-3xl max-w-md w-full overflow-hidden shadow-2xl",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 px-8 py-6 text-white text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(x.gJy,{className:"text-3xl"})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Stop Voting?"})]}),(0,l.jsxs)("div",{className:"p-8 text-center",children:[l.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Stopping the voting process will finalize the election and you won't be able to restart it. Are you sure you want to proceed?"}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[l.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors duration-200 font-semibold",children:"Cancel"}),l.jsx("button",{onClick:()=>{b(!1),C()},className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:shadow-lg transition-all duration-200 font-semibold",children:"Yes, Stop Voting"})]})]})]})}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-3xl max-w-md w-full overflow-hidden shadow-2xl",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-logoBlue to-bgBlue px-8 py-6 text-white text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(x.FJM,{className:"text-3xl"})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Start Voting?"})]}),(0,l.jsxs)("div",{className:"p-8 text-center",children:[l.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Starting the voting process will allow voters to cast their votes. Are you ready to begin the election?"}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[l.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors duration-200 font-semibold",children:"Cancel"}),l.jsx("button",{onClick:()=>{v(!1),C()},className:"flex-1 px-6 py-3 bg-gradient-to-r from-logoBlue to-bgBlue text-white rounded-xl hover:shadow-lg transition-all duration-200 font-semibold",children:"Yes, Start Voting"})]})]})]})})]})})}},7565:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});let l=(0,s(8570).createProxy)(String.raw`/Users/manojshrestha/blockchain-voting/frontend/src/app/admin/adminPanel/votingStatus/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),l=t.X(0,[948,823,596,434,226,666,119,255],()=>s(6018));module.exports=l})();